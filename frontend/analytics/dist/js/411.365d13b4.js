"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[411],{9319:function(e,t,a){a.d(t,{P:function(){return o}});a(560);var l=a(2578),n=a(3583),s=a(4890),i=a(3373);const o=(0,l.Q_)("integration-store",{state:()=>({integrationListIsUpdating:!0,integrationListUpdatingError:!1,integrationList:[],integrationWebhookSettings:void 0,integrationLeadSourceType:-1}),getters:{getAllCRM:e=>e.integrationList.filter((e=>e.integration_type===s.R_.CRM)),getAmoCRM:e=>e.integrationList.filter((e=>e.type===s.J.amoCRM&&e.integration_type===s.R_.CRM)),getWehookIntegration:e=>e.integrationList.filter((e=>e.type===s.RZ[s.R_.LEAD_SOURCE].WEBHOOK&&e.integration_type===s.R_.LEAD_SOURCE)),getAllLeadSource:e=>e.integrationList.filter((e=>e.integration_type===s.R_.LEAD_SOURCE)),getAllAdvertisingChannels:e=>e.integrationList.filter((e=>e.integration_type===s.R_.ADVERTISING_CHANNELS))},actions:{async updateIntegrationList(e){this.integrationListIsUpdating=!0,this.integrationListUpdatingError=!1;try{this.integrationList=await n.x.getAll(e)}catch(t){this.integrationListUpdatingError=t.toString?t.toString():"При обновлении интеграция произошла ошибка"}this.integrationListIsUpdating=!0},async add(e,t,a,l,s){const i=await n.x.postIntegration(e,t,a,l,s),o=await n.x.get(e,i);return this.integrationList.push(o),i},async getLeadSourceIntegrationType(e){this.integrationLeadSourceType=e},async getSettingsWebhook(e,t){const a=await i.tf.getSettingSourceWebhook(e,t,this.integrationLeadSourceType);return this.integrationWebhookSettings=a,a},async init(e){try{return await Promise.all([this.updateIntegrationList(e)]),!0}catch(t){return!1}},async remove(e){return!0}}})},4656:function(e,t,a){a.d(t,{Y:function(){return n}});var l=a(7825);class n{static async putSettingChannel(e,t,a){return l.tw.getInstance().PUT_SETTING(e,t,a)}static async postIntegrationChannel(e,t){return l.tw.getInstance().POST_INTEGRATION(e,t)}static async putSettingCampaign(e,t,a){return l.tw.getInstance().PUT_CAMPAIGN(e,t,a)}static async getSettingChannel(e,t){return l.tw.getInstance().GET_SETTING(e,t)}static async postAuthChannel(e,t,a){return l.tw.getInstance().POST_AUTH(e,t,a)}static async getExistChannel(e,t){return l.tw.getInstance().GET_EXIST(e,t)}static async getCampaignChannels(e,t){return l.tw.getInstance().getCampaignChannels(e,t)}}},979:function(e,t,a){a.r(t),a.d(t,{default:function(){return Jn}});a(560);var l=a(3396),n=a(4870),s=a(9242),i=a(7139),o=a(147),r=a(4534);function u(e,t){return(0,l.YP)(e,(e=>{})),{isOpen:e}}var d=a(2483),c=a(7312),m=a(8952);const v={key:0,class:"ml-3 text-medium-emphasis"},p={key:0,class:"text-error"};var _=(0,l.aZ)({__name:"step-auth",props:{isOpen:{type:Boolean}},setup(e){const t=(0,d.yj)(),a=(0,l.Fl)((()=>t.params.statId)),_=(0,l.Fl)((()=>t.params.id)),{data:g,isLoading:f,executeRequest:y,isError:h,error:b}=(0,o.Z)({request:r.fs.getUrlForIntegration,initialArgs:[Number(t.params.id),Number(t.params.statId)]}),{data:S,executeRequest:w}=(0,o.Z)({immediate:!0,request:r.fs.getIntegrationExistComplex,initialArgs:[Number(_.value),Number(a.value)]}),I=e;return u((0,n.Vh)((()=>I.isOpen)),(()=>{y(Number(_.value),Number(a.value))})),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)((0,l.Wm)(c.T,{loading:(0,n.SU)(f),color:"primary",variant:"flat",size:"default",href:(0,n.SU)(g),text:"Авторизовать приложение"},null,8,["loading","href"]),[[s.F8,!(0,n.SU)(S)?.status_allocation]]),(0,l.Wm)(m.vQ,null,{default:(0,l.w5)((()=>[(0,n.SU)(f)?((0,l.wg)(),(0,l.iD)("span",v," Загружаем ссылку для авторизации ")):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(m.T0,null,{default:(0,l.w5)((()=>[(0,n.SU)(h)?((0,l.wg)(),(0,l.iD)("span",p,(0,i.zw)((0,n.SU)(b)),1)):(0,l.kq)("",!0)])),_:1})],64))}});const g=_;var f,y,h=g,b=a(3289),S=a(678);function w(e,t,a,n,s,i){return(0,l.wg)(),(0,l.iD)("span",null,[(0,l.Wm)(b.t,{size:e.size,style:{cursor:"pointer"},icon:e.type},null,8,["size","icon"]),(0,l.Wm)(S.N,{activator:"parent",text:e.information,location:e.lacation,"open-delay":"300","max-width":"300"},null,8,["text","location"])])}(function(e){e["alert"]="mdi-alert-circle-outline",e["info"]="mdi-information-outline",e["question"]="mdi-help-circle-outline"})(f||(f={})),function(e){e["start"]="start",e["end"]="end",e["top"]="top",e["bottom"]="bottom"}(y||(y={}));var I=(0,l.aZ)({name:"information-icon",props:{size:{type:String,default:"medium"},information:{type:String,default:"Информация"},type:{type:String,default:f.info},color:{type:String,default:""},lacation:{type:String,default:y.top}}}),C=a(89);const U=(0,C.Z)(I,[["render",w]]);var k=U,W=a(4814),x=a.n(W),T=a(7325);const N={class:"amo-statuses-card"},L={class:"amo-statuses-card__body__item"};var E=(0,l.aZ)({__name:"_status_card",props:{allocationId:{},title:{},hint:{},headerClasses:{},itemList:{},isLoading:{type:Boolean}},setup(e,{expose:t}){const a=e,{title:o,headerClasses:r,hint:u,itemList:d,allocationId:c}=(0,n.BK)(a),v=(0,n.Vh)(a.itemList);(0,l.YP)(d,(e=>{v.value=e}));const p={animation:400,disabled:!1,forceFallback:!0,ghostClass:"draggable-ghost",dragClass:"draggable-drag",chosenClass:"draggable-chosen",fallbackTolerance:10,scrollSensitivity:200},_=()=>v;return t({getStatusList:_,allocationId:c}),(e,t)=>((0,l.wg)(),(0,l.iD)("article",N,[(0,l._)("header",{class:(0,i.C_)("amo-statuses-card__header "+(0,n.SU)(r))},[(0,l.Uk)((0,i.zw)((0,n.SU)(o))+" ",1),(0,l.Wm)((0,n.SU)(k),{information:(0,n.SU)(u)},null,8,["information"])],2),e.isLoading?((0,l.wg)(),(0,l.j4)(T.K,{key:0,indeterminate:"",color:"secondary"})):(0,l.kq)("",!0),(0,l.Wm)(m.Z5,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)((0,n.SU)(x()),(0,l.dG)({modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),group:"amo-statuses","item-key":"id",tag:"ul"},p,{class:"amo-statuses-card__body"}),{item:(0,l.w5)((({element:e})=>[(0,l._)("li",L,(0,i.zw)(e.show_name),1)])),_:1},16,["modelValue"]),[[s.F8,!e.isLoading]])])),_:1})]))}});const R=(0,C.Z)(E,[["__scopeId","data-v-b5583d44"]]);var V,A=R;(function(e){e[e["UNDEFINED"]=0]="UNDEFINED",e[e["IN_PROGRESS"]=1]="IN_PROGRESS",e[e["PAID"]=2]="PAID",e[e["CANSELED"]=3]="CANSELED"})(V||(V={}));const q={[V.PAID]:r.aJ.PAID,[V.IN_PROGRESS]:r.aJ.IN_PROGRESS,[V.CANSELED]:r.aJ.CANCELED},F={clearable:!0,hideDetails:!1,itemTitle:"name",itemValue:"id",returnObject:!1,class:"mt-2",noDataText:"Результатов не найдено"},H=e=>((0,l.dD)("data-v-677200ed"),e=e(),(0,l.Cn)(),e),O={class:"amo-statuses"},D=H((()=>(0,l._)("h3",{class:"amo-card__header"}," Загрузка заявок из CRM: распределение статусов ",-1))),B=H((()=>(0,l._)("p",{class:"amo-card__paragraph"},' Распределите статусы ваших заявок по трем группам статусов, которые затем будут учитываться в аналитике как сделки в работе, оплаченные или отмененные сделки. Статусы, которые не нужно учитывать в аналитике оставьте в группе "не учитываются". ',-1))),Z=H((()=>(0,l._)("p",{class:"amo-card__paragraph mt-2"}," После распределения статусов заказы из CRM будут загружены в ваш проект в течение часа. ",-1))),z={class:"amo-statuses__container mt-3"},M={class:"amo-statuses__action mt-4"},P={key:0,class:"text-error"},Y={key:1,class:"text-error"};var G=(0,l.aZ)({__name:"step-statuses",props:{isOpen:{type:Boolean}},setup(e){const t=(0,d.tv)(),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),u=(0,l.Fl)((()=>a.params.id)),{data:v,isLoading:p,isError:_,error:g,executeRequest:f}=(0,o.Z)({immediate:!0,request:r.fs.getAllStatusByPipeline,initialArgs:[Number(u.value),Number(s.value)]});(0,l.YP)(v,(e=>{if(void 0===e)return;const t=h.value.find((e=>e.id===V.UNDEFINED)),a=h.value.find((e=>e.id===V.IN_PROGRESS)),l=h.value.find((e=>e.id===V.PAID)),n=h.value.find((e=>e.id===V.CANSELED));t&&a&&l&&n&&(t.itemList=e,a.itemList=[],l.itemList=[],n.itemList=[])}));const y=(0,n.iH)([]),h=(0,n.iH)([{id:V.UNDEFINED,title:"Не учитываются",hint:"Сделки, которые не будут учитываться Roistat. Например, мусорные сделки или дубли",headerClasses:"bg-background",itemList:[]},{id:V.IN_PROGRESS,title:"В работе",hint:"Сделки в процессе. Например, сделки в процессе переговоров или отгрузки товара",headerClasses:"bg-primary",itemList:[]},{id:V.PAID,hint:"Сделки, по которым совершена оплата или точно будет совершена оплата",title:"Оплаченные",headerClasses:"bg-success",itemList:[]},{id:V.CANSELED,title:"Отмененные",hint:"Отмененные сделки. Например, отказ или возврат товара",headerClasses:"bg-error",itemList:[]}]),b=(0,n.iH)("Сохранить и продолжить"),w=()=>{C.value=!0;let e=[];y.value.forEach((t=>{const a=t.allocationId;if(a===V.UNDEFINED)return;const l=t.getStatusList().value.map((e=>({status_id:e.id,status_allocation:q[a],pipeline_id:e.pipeline_id})));e=e.concat(l)})),W(Number(u.value),Number(s.value),e)},I=e=>{b.value="Сохранено",setTimeout((()=>{t.push({...a,query:{step:Jt[2]}}).finally((()=>{b.value="Сохранить и продолжить"}))}),1e3)},{isLoading:C,isError:U,error:k,executeRequest:W}=(0,o.Z)({request:r.fs.postSettingsAllocation,immediate:!1,onSuccess:I});return(e,t)=>((0,l.wg)(),(0,l.iD)("section",O,[D,B,Z,(0,l._)("div",z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.value,(e=>((0,l.wg)(),(0,l.j4)(A,{ref_for:!0,ref_key:"cardRefs",ref:y,"allocation-id":e.id,title:e.title,hint:e.hint,"is-loading":(0,n.SU)(p),"item-list":e.itemList,"header-classes":e.headerClasses,key:e.id},null,8,["allocation-id","title","hint","is-loading","item-list","header-classes"])))),128))]),(0,l._)("div",M,[(0,l.Wm)(c.T,{size:"default",color:"primary",onClick:t[0]||(t[0]=e=>w()),loading:(0,n.SU)(C)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(b.value)+" ",1),(0,l.Wm)(S.N,{activator:"parent",text:"Сохранить распределение статусов и продолжить настройку"})])),_:1},8,["loading"])]),(0,l.Wm)(m.T0,null,{default:(0,l.w5)((()=>[(0,n.SU)(_)?((0,l.wg)(),(0,l.iD)("span",P,(0,i.zw)((0,n.SU)(g)),1)):(0,l.kq)("",!0),(0,n.SU)(U)?((0,l.wg)(),(0,l.iD)("span",Y,(0,i.zw)((0,n.SU)(k)),1)):(0,l.kq)("",!0)])),_:1})]))}});const j=(0,C.Z)(G,[["__scopeId","data-v-677200ed"]]);var X=j,$=a(6204);const J={class:"amo-proxy-lead"},K=(0,l.uE)('<h3 class="amo-card__header"> Инструкция по включению отправки заявок </h3><p class="amo-card__paragraph mt-2"> Распределив статусы вашей воронки по группам, вы уже будете видеть заявки в системе аналитики. </p><p class="amo-card__paragraph mt-2"> Для отслеживания источников заявок, необходимо настроить передачу в CRM дополнительного поля. Подробнее можете прочесть в документации. </p><p class="amo-card__paragraph mt-2"> Вы можете подключить формы вашего сайта к Roistat через интерфейс, тогда заявки из этих форм будут автоматически попадать в CRM. </p><p class="amo-card__paragraph mt-2"> Также передачу заявок в CRM можно настроить, добавив код на ваш сайт. Описание с примерами кода находится в нашей документации. </p>',5),Q={class:"amo-card__paragraph mt-2"};var ee=(0,l.aZ)({__name:"step-proxy-lead",props:{isOpen:{type:Boolean}},setup(e){const t=e,a=(0,d.yj)();return u((0,n.Vh)((()=>t.isOpen))),(e,t)=>((0,l.wg)(),(0,l.iD)("section",J,[K,(0,l._)("p",Q,[(0,l.Uk)(" Если вы используете конструкторы сайтов, форм, сервисы обратного звонка, коллтрекинга для получения заявок, то можете настроить их в "),(0,l.Wm)((0,n.SU)(d.rH),{to:{name:(0,n.SU)($.m8).Settings_Integrations}},{default:(0,l.w5)((()=>[(0,l.Uk)(" каталоге интеграций.")])),_:1},8,["to"])]),(0,l.Wm)(c.T,{to:{...(0,n.SU)(a),query:{step:(0,n.SU)(Jt)[3]}},text:"Продолжить",size:"default",color:"primary",class:"mt-5"},null,8,["to"])]))}});const te=ee;var ae=te,le=a(2650),ne=a(6422),se=a(165);const ie={class:"amo-settings"},oe=(0,l._)("h3",{class:"amo-card__header"}," Загрузка заявок из CRM: расширенные настройки ",-1),re={class:"amo-card__paragraph"},ue={class:"amo-card__paragraph"},de={class:"amo-card__paragraph"},ce={class:"amo-card__paragraph"},me={class:"amo-card__paragraph"},ve={key:0,class:"text-error"},pe={key:1,class:"text-error"};var _e=(0,l.aZ)({__name:"step-settings",props:{isOpen:{type:Boolean}},setup(e){const t=e,a=(0,d.tv)(),v=(0,d.yj)(),p=(0,l.Fl)((()=>v.params.statId)),_=(0,l.Fl)((()=>v.params.id)),{data:g,isLoading:f,isError:y,error:h,executeRequest:b}=(0,o.Z)({request:r.fs.getAllFields,initialArgs:[Number(_.value),Number(p.value)]});u((0,n.Vh)((()=>t.isOpen)),b);const S=e=>!(e.length>30)||"Длина поля не должна превышать 30 символов",w=(0,n.iH)(),I=(0,n.iH)(null),C=(0,n.iH)(""),U=(0,n.iH)(null),W=(0,n.iH)(null),x=(0,n.iH)(null),N=async()=>{try{if(!w.value)return;if(!(await w.value.validate()).valid)return;q(Number(p.value),Number(_.value),H())}catch(h){A.value="При сохранении возникла ошибка",V.value=!0}},L=(0,n.iH)("Сохранить и продолжить"),E=e=>{L.value="Сохранено",setTimeout((async()=>{await a.push({...v,query:{step:Jt[4]}}),L.value="Сохранить и продолжить"}),1e3)},{isLoading:R,isError:V,error:A,executeRequest:q}=(0,o.Z)({request:r.fs.postSetting,immediate:!1,onSuccess:E}),H=()=>({responsible_user_id:null,pipeline_id:null,profit:x.value,cost:W.value,revenue:U.value,filter:I.value,send_leads_to_unsorted:null,filtering_value:""===C.value?null:C.value,form_id:null,form_name:null}),O=()=>{b(Number(_.value),Number(p.value))};return(e,t)=>((0,l.wg)(),(0,l.iD)("section",ie,[oe,(0,l.Wm)(m.Z5,null,{default:(0,l.w5)((()=>[(0,n.SU)(f)?((0,l.wg)(),(0,l.j4)(T.K,{key:0,indeterminate:"",color:"secondary"})):((0,l.wg)(),(0,l.j4)(ne.O,{key:1,ref_key:"form",ref:w,class:"amo-settings__form mt-2 mb-2",onSubmit:(0,s.iM)(N,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("label",re,[(0,l.Uk)(" Поле для фильтрации "),(0,l.Wm)((0,n.SU)(k),{information:"Если вы ведете несколько бизнесов в одной CRM, вы можете выделить каждый из бизнесов через поле фильтрации."})]),(0,l.Wm)(le.f,(0,l.dG)({modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=e=>I.value=e),autofocus:"",items:(0,n.SU)(g)},(0,n.SU)(F)),null,16,["modelValue","items"]),(0,l._)("label",ue,[(0,l.Uk)(" Значение фильтрации "),(0,l.Wm)((0,n.SU)(k),{information:"Если выбрано поле для фильтрации но не введено значение, то будут загружены только те сделки у которых поле пустое . Вы можете использовать Регулярные Выражения для этого фильтра."})]),(0,l.Wm)(se.h,(0,l.dG)({modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),counter:30,rules:[S]},(0,n.SU)(F)),null,16,["modelValue","rules"]),(0,l._)("label",de,[(0,l.Uk)(" Поле с выручкой "),(0,l.Wm)((0,n.SU)(k),{information:"Выберите дополнительное поле сделки, из которого будет загружаться выручка. Если поле не выбрано, то выручка будет загружаться из стандартного поля в CRM."})]),(0,l.Wm)(le.f,(0,l.dG)({modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=e=>U.value=e),items:(0,n.SU)(g)},(0,n.SU)(F)),null,16,["modelValue","items"]),(0,l._)("label",ce,[(0,l.Uk)(" Поле себестоимости "),(0,l.Wm)((0,n.SU)(k),{information:"Выберите дополнительное поле сделки, из которого будет загружаться себестоимость. Прибыль будет подсчитана автоматически."})]),(0,l.Wm)(le.f,(0,l.dG)({modelValue:W.value,"onUpdate:modelValue":t[3]||(t[3]=e=>W.value=e),items:(0,n.SU)(g)},(0,n.SU)(F)),null,16,["modelValue","items"]),(0,l._)("label",me,[(0,l.Uk)(" Поле с прибылью "),(0,l.Wm)((0,n.SU)(k),{information:"Выберите дополнительное поле сделки, из которого будет загружаться прибыль. Значение будет использоваться для автоматического подсчета себестоимости."})]),(0,l.Wm)(le.f,(0,l.dG)({modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=e=>x.value=e),items:(0,n.SU)(g)},(0,n.SU)(F)),null,16,["modelValue","items"]),(0,l.Wm)(c.T,{type:"submit",size:"default",variant:"flat",color:"primary",class:"mt-2",loading:(0,n.SU)(R)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(L.value),1)])),_:1},8,["loading"]),(0,l.Wm)(c.T,{size:"small",variant:"flat",color:"primary",class:"mt-2 ml-2",icon:"mdi-refresh",onClick:O})])),_:1},512))])),_:1}),(0,l.Wm)(m.T0,null,{default:(0,l.w5)((()=>[(0,n.SU)(y)?((0,l.wg)(),(0,l.iD)("span",ve,(0,i.zw)((0,n.SU)(h)),1)):(0,l.kq)("",!0),(0,n.SU)(V)?((0,l.wg)(),(0,l.iD)("span",pe,(0,i.zw)((0,n.SU)(A)),1)):(0,l.kq)("",!0)])),_:1})]))}});const ge=_e;var fe,ye=ge;(function(e){e[e["TRUE"]=1]="TRUE",e[e["FALSE"]=0]="FALSE"})(fe||(fe={}));var he=a(9114),be=a(3173),Se=a(6193),we=a(8969),Ie=a(1710),Ce=a(8717),Ue=a(3766),ke=a(1107),We=a(7514),xe=a(9888),Te=a(131);const Ne=(0,Ue.U)({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...(0,he.c)(),...(0,Se.UZ)()},"VSwitch"),Le=(0,ke.ev)()({name:"VSwitch",inheritAttrs:!1,props:Ne(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:a,slots:s}=t;const i=(0,Ce.z)(e,"indeterminate"),o=(0,Ce.z)(e,"modelValue"),{loaderClasses:r}=(0,Ie.U2)(e),{isFocused:u,focus:d,blur:c}=(0,we.K)(e),v=(0,n.iH)(),p=(0,l.Fl)((()=>"string"===typeof e.loading&&""!==e.loading?e.loading:e.color)),_=(0,We.sq)(),g=(0,l.Fl)((()=>e.id||`switch-${_}`));function f(){i.value&&(i.value=!1)}function y(e){e.stopPropagation(),e.preventDefault(),v.value?.input?.click()}return(0,xe.L)((()=>{const[t,n]=(0,Te.An)(a),_=he.q.filterProps(e),h=Se.g5.filterProps(e);return(0,l.Wm)(he.q,(0,l.dG)({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":i.value},r.value,e.class]},t,_,{modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,id:g.value,focused:u.value,style:e.style}),{...s,default:t=>{let{id:a,messagesId:r,isDisabled:u,isReadonly:_,isValid:g}=t;return(0,l.Wm)(Se.g5,(0,l.dG)({ref:v},h,{modelValue:o.value,"onUpdate:modelValue":[e=>o.value=e,f],id:a.value,"aria-describedby":r.value,type:"checkbox","aria-checked":i.value?"mixed":void 0,disabled:u.value,readonly:_.value,onFocus:d,onBlur:c},n),{...s,default:e=>{let{backgroundColorClasses:t,backgroundColorStyles:a}=e;return(0,l.Wm)("div",{class:["v-switch__track",...t.value],style:a.value,onClick:y},null)},input:t=>{let{inputNode:a,icon:n,backgroundColorClasses:i,backgroundColorStyles:o}=t;return(0,l.Wm)(l.HY,null,[a,(0,l.Wm)("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":n||e.loading},e.inset?void 0:i.value],style:e.inset?void 0:o.value},[(0,l.Wm)(m.T0,null,{default:()=>[e.loading?(0,l.Wm)(Ie.rD,{name:"v-switch",active:!0,color:!1===g.value?void 0:p.value},{default:e=>s.loader?s.loader(e):(0,l.Wm)(be.L,{active:e.isActive,color:e.color,indeterminate:!0,size:"16",width:"2"},null)}):n&&(0,l.Wm)(b.t,{key:n,icon:n,size:"x-small"},null)]})])])}})}})})),{}}}),Ee=e=>((0,l.dD)("data-v-5f9a4d46"),e=e(),(0,l.Cn)(),e),Re={class:"amo-basic-settings"},Ve=Ee((()=>(0,l._)("h3",{class:"amo-card__header"}," Отправка заявок в CRM-систему: базовые настройки ",-1))),Ae={class:"amo-basic-settings__body__switch-container"},qe={for:"amo-send-lead-setting"},Fe=Ee((()=>(0,l._)("label",{class:"amo-card__paragraph"}," Идентификатор формы ",-1))),He=Ee((()=>(0,l._)("label",{class:"amo-card__paragraph"}," Наименование формы ",-1))),Oe={class:"amo-card__paragraph"},De=Ee((()=>(0,l._)("label",{class:"amo-card__paragraph"}," Ответственные за заявки ",-1))),Be={key:0,class:"text-error"},Ze={key:1,class:"text-error"},ze={key:2,class:"text-error"};var Me=(0,l.aZ)({__name:"step-basic-settings",props:{isOpen:{type:Boolean}},setup(e){const t=(0,d.tv)(),a=e,v=(0,d.yj)(),p=(0,l.Fl)((()=>v.params.statId)),_=(0,l.Fl)((()=>v.params.id)),{data:g,isLoading:f,isError:y,error:h,executeRequest:b}=(0,o.Z)({request:r.fs.getAllUsers,initialArgs:[Number(_.value),Number(p.value)]}),{data:S,isLoading:w,isError:I,error:C,executeRequest:U}=(0,o.Z)({request:r.fs.getAllPipeline,initialArgs:[Number(_.value),Number(p.value)]}),W=(0,l.Fl)((()=>f.value||w.value)),x=()=>({responsible_user_id:E.value,pipeline_id:L.value,profit:null,cost:null,revenue:null,filter:null,send_leads_to_unsorted:R.value?fe.TRUE:fe.FALSE,filtering_value:null,form_id:""===V.value?null:V.value,form_name:""===A.value?null:A.value}),N=()=>{b(Number(_.value),Number(p.value)),U(Number(_.value),Number(p.value))};u((0,n.Vh)((()=>a.isOpen)),N);const L=(0,n.iH)(null),E=(0,n.iH)(null),R=(0,n.iH)(!1),V=(0,n.iH)(""),A=(0,n.iH)(""),q=(0,n.iH)(),H=(0,n.iH)("Сохранить и завершить настройку"),O=e=>{H.value="Сохранено",setTimeout((()=>{H.value="Сохранить и завершить настройку",t.push({name:$.m8.Settings_Integrations})}),1e3)},{isLoading:D,error:B,isError:Z,executeRequest:z}=(0,o.Z)({request:r.fs.postSetting,immediate:!1,onSuccess:O}),M=async()=>{q.value&&(await q.value.validate()).valid&&z(Number(p.value),Number(_.value),x())};return(e,t)=>((0,l.wg)(),(0,l.iD)("section",Re,[Ve,(0,l.Wm)(m.Z5,null,{default:(0,l.w5)((()=>[W.value?((0,l.wg)(),(0,l.j4)(T.K,{key:0,indeterminate:"",color:"secondary"})):((0,l.wg)(),(0,l.j4)(ne.O,{key:1,class:"amo-basic-settings__body",ref_key:"form",ref:q,onSubmit:(0,s.iM)(M,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",Ae,[(0,l.Wm)(Le,{id:"amo-send-lead-setting",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=e=>R.value=e)},null,8,["modelValue"]),(0,l._)("label",qe,[(0,l.Uk)(" Отправлять лиды в «Неразобранное» "),(0,l.Wm)(k,{information:"В связи с ограничениями со стороны AmoCRM, при отправке заявок в «неразобранное» настраиваемая проверка на дубли не применяется для заявок находящихся в этом статусе. Заявки находящиеся в статусе «неразобранное» не загружаются в Roistat. Чтобы заявки загрузились в проект переведите их в другой статус."})])]),Fe,(0,l.Wm)(se.h,(0,l.dG)({modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e)},(0,n.SU)(F),{disabled:""}),null,16,["modelValue"]),He,(0,l.Wm)(se.h,(0,l.dG)({modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=e=>A.value=e)},(0,n.SU)(F),{disabled:""}),null,16,["modelValue"]),(0,l._)("label",Oe,[(0,l.Uk)(" Идентификатор воронки "),(0,l.Wm)(k,{information:"Если параметр не передан, заявка будет добавлена в неразобранное основной воронки."})]),(0,l.Wm)(le.f,(0,l.dG)({autofocus:"",modelValue:L.value,"onUpdate:modelValue":t[3]||(t[3]=e=>L.value=e),items:(0,n.SU)(S)},(0,n.SU)(F)),null,16,["modelValue","items"]),De,(0,l.Wm)(le.f,(0,l.dG)({modelValue:E.value,"onUpdate:modelValue":t[4]||(t[4]=e=>E.value=e),items:(0,n.SU)(g)},(0,n.SU)(F)),null,16,["modelValue","items"]),(0,l.Wm)(c.T,{type:"submit",size:"default",variant:"flat",color:"primary",class:"mt-2",loading:(0,n.SU)(D)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(H.value),1)])),_:1},8,["loading"])])),_:1},512))])),_:1}),(0,l.Wm)(m.T0,null,{default:(0,l.w5)((()=>[(0,n.SU)(y)?((0,l.wg)(),(0,l.iD)("span",Be,(0,i.zw)((0,n.SU)(h)),1)):(0,l.kq)("",!0),(0,n.SU)(I)?((0,l.wg)(),(0,l.iD)("span",Ze,(0,i.zw)((0,n.SU)(C)),1)):(0,l.kq)("",!0),(0,n.SU)(Z)?((0,l.wg)(),(0,l.iD)("span",ze,(0,i.zw)((0,n.SU)(B)),1)):(0,l.kq)("",!0)])),_:1})]))}});const Pe=(0,C.Z)(Me,[["__scopeId","data-v-5f9a4d46"]]);var Ye=Pe;const Ge=e=>{const t=(0,d.yj)(),a=(0,d.tv)(),s=(0,n.iH)(t.query.step);return(0,l.YP)((()=>t.query.step),(t=>{void 0!==t&&"string"===typeof t&&e.includes(t)?s.value=t:a.replace({name:$.m8.Settings_Integrations_Edit,query:{step:e[0]}})}),{immediate:!0}),{step:s}};var je=a(652),Xe=a(1970),$e=a(3824),Je=a(836),Ke=a(1629);const Qe=(0,Ue.U)({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),et=(0,ke.ev)()({name:"VStepperActions",props:Qe(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:a,slots:n}=t;const{t:s}=(0,Ke.bU)();function i(){a("click:prev")}function o(){a("click:next")}return(0,xe.L)((()=>{const t={onClick:i},a={onClick:o};return(0,l.Wm)("div",{class:"v-stepper-actions"},[(0,l.Wm)(Je.z,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:s(e.prevText),variant:"text"}}},{default:()=>[n.prev?.({props:t})??(0,l.Wm)(c.T,t,null)]}),(0,l.Wm)(Je.z,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:s(e.nextText),variant:"tonal"}}},{default:()=>[n.next?.({props:a})??(0,l.Wm)(c.T,a,null)]})])})),{}}});var tt=a(1114);const at=(0,tt.J)("v-stepper-header");var lt=a(9166),nt=a(1138),st=a(5935);const it=e=>{const{touchstartX:t,touchendX:a,touchstartY:l,touchendY:n}=e,s=.5,i=16;e.offsetX=a-t,e.offsetY=n-l,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&a<t-i&&e.left(e),e.right&&a>t+i&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&n<l-i&&e.up(e),e.down&&n>l+i&&e.down(e))};function ot(e,t){const a=e.changedTouches[0];t.touchstartX=a.clientX,t.touchstartY=a.clientY,t.start?.({originalEvent:e,...t})}function rt(e,t){const a=e.changedTouches[0];t.touchendX=a.clientX,t.touchendY=a.clientY,t.end?.({originalEvent:e,...t}),it(t)}function ut(e,t){const a=e.changedTouches[0];t.touchmoveX=a.clientX,t.touchmoveY=a.clientY,t.move?.({originalEvent:e,...t})}function dt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>ot(e,t),touchend:e=>rt(e,t),touchmove:e=>ut(e,t)}}function ct(e,t){const a=t.value,l=a?.parent?e.parentElement:e,n=a?.options??{passive:!0},s=t.instance?.$.uid;if(!l||!s)return;const i=dt(t.value);l._touchHandlers=l._touchHandlers??Object.create(null),l._touchHandlers[s]=i,(0,Te.XP)(i).forEach((e=>{l.addEventListener(e,i[e],n)}))}function mt(e,t){const a=t.value?.parent?e.parentElement:e,l=t.instance?.$.uid;if(!a?._touchHandlers||!l)return;const n=a._touchHandlers[l];(0,Te.XP)(n).forEach((e=>{a.removeEventListener(e,n[e])})),delete a._touchHandlers[l]}const vt={mounted:ct,unmounted:mt};var pt=vt;const _t=Symbol.for("vuetify:v-window"),gt=Symbol.for("vuetify:v-window-group"),ft=(0,Ue.U)({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||"hover"===e},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...(0,lt.l)(),...(0,nt.Q)(),...(0,st.x$)()},"VWindow"),yt=(0,ke.ev)()({name:"VWindow",directives:{Touch:vt},props:ft(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:s}=(0,st.ER)(e),{isRtl:i}=(0,Ke.Vw)(),{t:o}=(0,Ke.bU)(),r=(0,Xe._v)(e,gt),u=(0,n.iH)(),d=(0,l.Fl)((()=>i.value?!e.reverse:e.reverse)),m=(0,n.XI)(!1),v=(0,l.Fl)((()=>{const t="vertical"===e.direction?"y":"x",a=d.value?!m.value:m.value,l=a?"-reverse":"";return`v-window-${t}${l}-transition`})),p=(0,n.XI)(0),_=(0,n.iH)(void 0),g=(0,l.Fl)((()=>r.items.value.findIndex((e=>r.selected.value.includes(e.id)))));(0,l.YP)(g,((e,t)=>{const a=r.items.value.length,l=a-1;m.value=a<=2?e<t:e===l&&0===t||(0!==e||t!==l)&&e<t})),(0,l.JJ)(_t,{transition:v,isReversed:m,transitionCount:p,transitionHeight:_,rootRef:u});const f=(0,l.Fl)((()=>e.continuous||0!==g.value)),y=(0,l.Fl)((()=>e.continuous||g.value!==r.items.value.length-1));function h(){f.value&&r.prev()}function b(){y.value&&r.next()}const S=(0,l.Fl)((()=>{const t=[],n={icon:i.value?e.nextIcon:e.prevIcon,class:"v-window__"+(d.value?"right":"left"),onClick:r.prev,ariaLabel:o("$vuetify.carousel.prev")};t.push(f.value?a.prev?a.prev({props:n}):(0,l.Wm)(c.T,n,null):(0,l.Wm)("div",null,null));const s={icon:i.value?e.prevIcon:e.nextIcon,class:"v-window__"+(d.value?"left":"right"),onClick:r.next,ariaLabel:o("$vuetify.carousel.next")};return t.push(y.value?a.next?a.next({props:s}):(0,l.Wm)(c.T,s,null):(0,l.Wm)("div",null,null)),t})),w=(0,l.Fl)((()=>{if(!1===e.touch)return e.touch;const t={left:()=>{d.value?h():b()},right:()=>{d.value?b():h()},start:e=>{let{originalEvent:t}=e;t.stopPropagation()}};return{...t,...!0===e.touch?{}:e.touch}}));return(0,xe.L)((()=>(0,l.wy)((0,l.Wm)(e.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":"hover"===e.showArrows},s.value,e.class],style:e.style},{default:()=>[(0,l.Wm)("div",{class:"v-window__container",style:{height:_.value}},[a.default?.({group:r}),!1!==e.showArrows&&(0,l.Wm)("div",{class:"v-window__controls"},[S.value])]),a.additional?.({group:r})]}),[[(0,l.Q2)("touch"),w.value]]))),{group:r}}}),ht=Symbol.for("vuetify:v-stepper"),bt=(0,Ue.U)({...(0,Te.CE)(ft(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),St=(0,ke.ev)()({name:"VStepperWindow",props:bt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const n=(0,l.f3)(ht,null),s=(0,Ce.z)(e,"modelValue"),i=(0,l.Fl)({get(){return null==s.value&&n?n.items.value.find((e=>n.selected.value.includes(e.id)))?.value:s.value},set(e){s.value=e}});return(0,xe.L)((()=>{const t=yt.filterProps(e);return(0,l.Wm)(yt,(0,l.dG)({_as:"VStepperWindow"},t,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,class:"v-stepper-window",mandatory:!1,touch:!1}),a)})),{}}});var wt=a(1136),It=a(1372),Ct=a(4906);const Ut=(0,Ue.U)({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...(0,lt.l)(),...(0,Xe.YQ)(),...(0,wt.H)()},"VWindowItem"),kt=(0,ke.ev)()({name:"VWindowItem",directives:{Touch:pt},props:Ut(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:a}=t;const i=(0,l.f3)(_t),o=(0,Xe.Yt)(e,gt),{isBooted:r}=(0,It.u)();if(!i||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=(0,n.XI)(!1),d=(0,l.Fl)((()=>r.value&&(i.isReversed.value?!1!==e.reverseTransition:!1!==e.transition)));function c(){u.value&&i&&(u.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,0===i.transitionCount.value&&(i.transitionHeight.value=void 0)))}function m(){!u.value&&i&&(u.value=!0,0===i.transitionCount.value&&(i.transitionHeight.value=(0,Te.kb)(i.rootRef.value?.clientHeight)),i.transitionCount.value+=1)}function v(){c()}function p(e){u.value&&(0,l.Y3)((()=>{d.value&&u.value&&i&&(i.transitionHeight.value=(0,Te.kb)(e.clientHeight))}))}const _=(0,l.Fl)((()=>{const t=i.isReversed.value?e.reverseTransition:e.transition;return!!d.value&&{name:"string"!==typeof t?i.transition.value:t,onBeforeEnter:m,onAfterEnter:c,onEnterCancelled:v,onBeforeLeave:m,onAfterLeave:c,onLeaveCancelled:v,onEnter:p}})),{hasContent:g}=(0,wt.l)(e,o.isSelected);return(0,xe.L)((()=>(0,l.Wm)(Ct.J,{transition:_.value,disabled:!r.value},{default:()=>[(0,l.wy)((0,l.Wm)("div",{class:["v-window-item",o.selectedClass.value,e.class],style:e.style},[g.value&&a.default?.()]),[[s.F8,o.isSelected.value]])]}))),{groupItem:o}}}),Wt=(0,Ue.U)({...Ut()},"VStepperWindowItem"),xt=(0,ke.ev)()({name:"VStepperWindowItem",props:Wt(),setup(e,t){let{slots:a}=t;return(0,xe.L)((()=>{const t=kt.filterProps(e);return(0,l.Wm)(kt,(0,l.dG)({_as:"VStepperWindowItem"},t,{class:"v-stepper-window-item"}),a)})),{}}});var Tt=a(4075),Nt=a(4286),Lt=a(6107);const Et=Symbol.for("vuetify:v-stepper"),Rt=(0,Ue.U)({altLabels:Boolean,bgColor:String,editable:Boolean,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},mobile:Boolean,nonLinear:Boolean,flat:Boolean,...(0,Xe.k4)({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...(0,Nt.Q)(),...(0,Te.M9)(Qe(),["prevText","nextText"])},"VStepper"),Vt=(0,ke.ev)()({name:"VStepper",props:Rt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{items:s,next:i,prev:o,selected:r}=(0,Xe._v)(e,Et),{color:u,editable:d,prevText:c,nextText:m}=(0,n.BK)(e),v=(0,l.Fl)((()=>e.items.map(((t,a)=>{const l=(0,Te.qF)(t,e.itemTitle,t),n=(0,Te.qF)(t,e.itemValue,a+1);return{title:l,value:n,raw:t}})))),p=(0,l.Fl)((()=>s.value.findIndex((e=>r.value.includes(e.id))))),_=(0,l.Fl)((()=>e.disabled?e.disabled:0===p.value?"prev":p.value===s.value.length-1&&"next"));return(0,Lt.AF)({VStepperItem:{editable:d,prevText:c,nextText:m},VStepperActions:{color:u,disabled:_,prevText:c,nextText:m}}),(0,xe.L)((()=>{const t=Nt.C.filterProps(e),n=!(!a.header&&!e.items.length),s=e.items.length>0,r=!e.hideActions&&!(!s&&!a.actions);return(0,l.Wm)(Nt.C,(0,l.dG)(t,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":e.mobile},e.class],style:e.style}),{default:()=>[n&&(0,l.Wm)(at,{key:"stepper-header"},{default:()=>[v.value.map(((e,t)=>(0,l.Wm)(l.HY,null,[!!t&&(0,l.Wm)(Tt.J,null,null),(0,l.Wm)(qt,e,{default:a[`header-item.${e.value}`]??a.header,icon:a.icon,title:a.title,subtitle:a.subtitle})])))]}),s&&(0,l.Wm)(St,{key:"stepper-window"},{default:()=>[v.value.map((e=>(0,l.Wm)(xt,{value:e.value},{default:()=>a[`item.${e.value}`]?.(e)??a.item?.(e)})))]}),a.default?.({prev:o,next:i}),r&&(a.actions?.({next:i,prev:o})??(0,l.Wm)(et,{key:"stepper-actions","onClick:prev":o,"onClick:next":i},a))]})})),{prev:o,next:i}}}),At=(0,Ue.U)({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},error:Boolean,errorIcon:{type:String,default:"$error"},icon:String,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]},...(0,Xe.YQ)()},"VStepperItem"),qt=(0,ke.ev)()({name:"VStepperItem",directives:{Ripple:$e.H},props:At(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:a}=t;const n=(0,Xe.Yt)(e,Et,!0),s=(0,l.Fl)((()=>n?.value.value??e.value)),i=(0,l.Fl)((()=>e.rules.every((e=>!0===e())))),o=(0,l.Fl)((()=>!e.disabled&&e.editable)),r=(0,l.Fl)((()=>e.error||!i.value)),u=(0,l.Fl)((()=>e.complete||e.rules.length>0&&i.value)),d=(0,l.Fl)((()=>r.value?e.errorIcon:u.value?e.completeIcon:e.editable?e.editIcon:e.icon)),c=(0,l.Fl)((()=>({canEdit:o.value,hasError:r.value,hasCompleted:u.value,title:e.title,subtitle:e.subtitle,step:s.value,value:e.value})));return(0,xe.L)((()=>{const t=(!n||n.isSelected.value||u.value||o.value)&&!r.value&&!e.disabled,i=!(!e.title&&!a.title),m=!(!e.subtitle&&!a.subtitle);function v(){n?.toggle()}return(0,l.wy)((0,l.Wm)("button",{class:["v-stepper-item",{"v-stepper-item--complete":u.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":r.value},n?.selectedClass.value],disabled:!e.editable,onClick:v},[(0,l.Wm)(je.V,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:t?e.color:void 0,size:24},{default:()=>[a.icon?.(c.value)??(d.value?(0,l.Wm)(b.t,{icon:d.value},null):s.value)]}),(0,l.Wm)("div",{class:"v-stepper-item__content"},[i&&(0,l.Wm)("div",{key:"title",class:"v-stepper-item__title"},[a.title?.(c.value)??e.title]),m&&(0,l.Wm)("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[a.subtitle?.(c.value)??e.subtitle]),a.default?.(c.value)])]),[[(0,l.Q2)("ripple"),e.ripple&&e.editable,null]])})),{}}});var Ft=a(11),Ht=(0,l.aZ)({__name:"index",props:{steps:{},selectedId:{},typeLeadSourceItntegration:{}},setup(e){const t=e,a=(0,d.tv)(),{steps:s,selectedId:i}=(0,n.BK)(t),o=(0,n.iH)([]),r=(0,l.Fl)({get:()=>i.value,set:e=>{const t=s.value.find((t=>t.id===e));t&&a.push(t.route)}});return(0,l.Rh)((()=>{try{const e=s.value.findIndex((e=>e.id===i.value));o.value&&o.value[e]&&o.value[e].$el.scrollIntoView()}catch(e){return void console.error(e)}})),(e,a)=>((0,l.wg)(),(0,l.j4)(Vt,{tag:"article",class:"stepper",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(at,{tag:"header",class:"stepper_header"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(s),(e=>((0,l.wg)(),(0,l.iD)(l.HY,{key:`${e.id}-step`},[(0,l.Wm)((0,n.SU)(qt),{ref_for:!0,ref_key:"stepperItems",ref:o,color:"primary",title:`${e.name}`,step:e.id,complete:e.isComplite,error:e.isError,editable:"",value:e.id},null,8,["title","step","complete","error","value"]),(0,l.Wm)(Tt.J,{class:"stepper_header__divider"})],64)))),128))])),_:1}),(0,l.Wm)(St,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,n.SU)(s),(e=>((0,l.wg)(),(0,l.j4)(xt,{key:`${e.id}-content`,value:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(Ft._,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(e.component),{"is-open":e.id===(0,n.SU)(i),"type-lead-source-itntegration":t.typeLeadSourceItntegration},null,8,["is-open","type-lead-source-itntegration"]))])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["modelValue"]))}});const Ot=(0,C.Z)(Ht,[["__scopeId","data-v-20514070"]]);var Dt=Ot,Bt=Dt,Zt=a(2578),zt=a(9319);const Mt=e=>((0,l.dD)("data-v-446eb858"),e=e(),(0,l.Cn)(),e),Pt={class:"amo-edit"},Yt=Mt((()=>(0,l._)("h1",{class:"mb-2"},"amoCrm",-1)));var Gt=(0,l.aZ)({__name:"index",setup(e){const{integrationList:t}=(0,Zt.Jk)((0,zt.P)()),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),i=(0,l.Fl)((()=>a.params.id));Ge(Jt);const{data:u,isLoading:c,isError:m,error:v,executeRequest:p}=(0,o.Z)({immediate:!0,request:r.fs.getIntegrationExistComplex,initialArgs:[Number(i.value),Number(s.value)]}),_=(0,n.XI)(Qt(a));(0,d.ao)((()=>{})),(0,l.YP)(u,(e=>{e&&(_.value=_.value.map((t=>t.id===Kt.AUTH?{...t,isComplite:e.auth}:t.id===Kt.SETTINGS?{...t,isComplite:e.setting}:t.id===Kt.STATUSES?{...t,isComplite:e.status_allocation}:t)))}),{immediate:!0});const g=(0,l.Fl)((()=>{const e=_.value.find((e=>e.route?.query?.step===a.query.step));return e?e.id:0}));return(e,t)=>((0,l.wg)(),(0,l.iD)("section",Pt,[Yt,(0,l.Wm)((0,n.SU)(Bt),{steps:_.value,"selected-id":g.value},null,8,["steps","selected-id"])]))}});const jt=(0,C.Z)(Gt,[["__scopeId","data-v-446eb858"]]);var Xt=jt,$t=Xt;const Jt=["oauth","statuses","proxy_lead","settings","basic_settings"];var Kt;(function(e){e[e["AUTH"]=0]="AUTH",e[e["STATUSES"]=1]="STATUSES",e[e["PROXY_LEAD"]=2]="PROXY_LEAD",e[e["SETTINGS"]=3]="SETTINGS",e[e["BASIC_SETTINGS"]=4]="BASIC_SETTINGS"})(Kt||(Kt={}));const Qt=e=>[{id:Kt.AUTH,name:"Авторизация",route:{...e,query:{step:Jt[0]}},component:h,isComplite:!1},{id:Kt.STATUSES,name:"Загрузка заявок из CRM: распределение статусов",route:{...e,query:{step:Jt[1]}},component:X,isComplite:!1},{id:Kt.PROXY_LEAD,name:"Инструкция по включению отправки заявок",route:{...e,query:{step:Jt[2]}},component:ae,isComplite:!0,isLoading:!1},{id:Kt.SETTINGS,name:"Загрузка заявок из CRM: расширенные настройки",route:{...e,query:{step:Jt[3]}},component:ye,isComplite:!1},{id:Kt.BASIC_SETTINGS,name:"Отправка заявок в CRM-систему: базовые настройки",route:{...e,query:{step:Jt[4]}},component:Ye,isComplite:!1}];var ea,ta=a(719);(function(e){e[e["IGNORE"]=0]="IGNORE",e[e["ALLOWED"]=1]="ALLOWED"})(ea||(ea={}));ta.z.object({campaign_id:ta.z.number(),name:ta.z.string(),created_at:ta.z.string().datetime(),status:ta.z.nativeEnum(ea)}),ea.ALLOWED,ea.IGNORE,ea.ALLOWED,ea.ALLOWED;var aa=a(4656),la=a(3419);var na=(0,l.aZ)({__name:"_campaign",setup(e){(0,n.iH)(0),(0,n.iH)([]);const t=(0,d.yj)(),{data:a,isLoading:s,isError:r,error:u,executeRequest:c=aa.Y.putSettingChannel}=(0,o.Z)({immediate:!0,request:aa.Y.getCampaignChannels,initialArgs:[Number(t.params.statId),Number(t.params.id)]}),{error:m,executeRequest:v}=(0,o.Z)({immediate:!1,request:aa.Y.putSettingCampaign});(0,l.bv)((()=>{}));const p=(0,n.iH)([{key:"number",title:"№",text:"232"},{key:"status",title:"Аналитика"},{key:"name",title:"Название",sortable:!1,align:"start",text:"232"},{key:"created_at",title:"Дата добавления",text:"232"}]),_=(0,n.iH)(a),g=(0,n.iH)(""),f=(e,a)=>{const l=1==a?0:1;console.log("route.params",t),v(Number(t.params.statId),Number(t.params.id),{campaigns:[{id:e,status:l}]}),console.log("Меняем статут кампании")};return(e,t)=>((0,l.wg)(),(0,l.j4)(Ft._,{flat:"",title:"Кампании"},{text:(0,l.w5)((()=>[(0,l.Wm)(se.h,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),label:"Search","prepend-inner-icon":"mdi-magnify","single-line":"",variant:"outlined","hide-details":""},null,8,["modelValue"])])),default:(0,l.w5)((()=>[(0,l.Wm)(la.y_,{headers:p.value,items:_.value,search:g.value},{["item.number"]:(0,l.w5)((({index:e})=>[(0,l.Uk)((0,i.zw)(e+1),1)])),["item.status"]:(0,l.w5)((({item:e})=>[(0,l.Wm)(Le,{color:"primary","model-value":1==e.status,onChange:t=>f(e.campaign_id,e.status)},null,8,["model-value","onChange"])])),_:2},1032,["headers","items","search"])])),_:1}))}});const sa=na;var ia=sa;function oa(e,t){return(0,l.wg)(),(0,l.iD)("div",null,"channel")}const ra={},ua=(0,C.Z)(ra,[["render",oa]]);var da=ua,ca=a(2370);const ma=Symbol.for("vuetify:v-tabs");var va=a(3122),pa=a(8587);const _a=(0,Ue.U)({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...(0,Te.CE)((0,c.L)({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ga=(0,ke.ev)()({name:"VTab",props:_a(),setup(e,t){let{slots:a,attrs:s}=t;const{textColorClasses:i,textColorStyles:o}=(0,ca.rY)(e,"sliderColor"),r=(0,l.Fl)((()=>"horizontal"===e.direction)),u=(0,n.XI)(!1),d=(0,n.iH)(),m=(0,n.iH)();function v(e){let{value:t}=e;if(u.value=t,t){const e=d.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),t=m.value;if(!e||!t)return;const a=getComputedStyle(e).color,l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),s=r.value?"x":"y",i=r.value?"X":"Y",o=r.value?"right":"bottom",u=r.value?"width":"height",c=l[s],v=n[s],p=c>v?l[o]-n[o]:l[s]-n[s],_=Math.sign(p)>0?r.value?"right":"bottom":Math.sign(p)<0?r.value?"left":"top":"center",g=Math.abs(p)+(Math.sign(p)<0?l[u]:n[u]),f=g/Math.max(l[u],n[u])||0,y=l[u]/n[u]||0,h=1.5;(0,va.j)(t,{backgroundColor:[a,"currentcolor"],transform:[`translate${i}(${p}px) scale${i}(${y})`,`translate${i}(${p/h}px) scale${i}(${(f-1)/h+1})`,"none"],transformOrigin:Array(3).fill(_)},{duration:225,easing:pa.Ly})}}return(0,xe.L)((()=>{const t=c.T.filterProps(e);return(0,l.Wm)(c.T,(0,l.dG)({symbol:ma,ref:d,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},t,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":v}),{...a,default:()=>(0,l.Wm)(l.HY,null,[a.default?.()??e.text,!e.hideSlider&&(0,l.Wm)("div",{ref:m,class:["v-tab__slider",i.value],style:o.value},null)])})})),{}}});var fa=a(8157),ya=a(1617),ha=a(9737);function ba(e){const t=.501,a=Math.abs(e);return Math.sign(e)*(a/((1/t-2)*(1-a)+1))}function Sa(e){let{selectedElement:t,containerSize:a,contentSize:l,isRtl:n,currentScrollOffset:s,isHorizontal:i}=e;const o=i?t.clientWidth:t.clientHeight,r=i?t.offsetLeft:t.offsetTop,u=n&&i?l-r-o:r,d=a+s,c=o+u,m=.4*o;return u<=s?s=Math.max(u-m,0):d<=c&&(s=Math.min(s-(d-c-m),l-a)),s}function wa(e){let{selectedElement:t,containerSize:a,contentSize:l,isRtl:n,isHorizontal:s}=e;const i=s?t.clientWidth:t.clientHeight,o=s?t.offsetLeft:t.offsetTop,r=n&&s?l-o-i/2-a/2:o+i/2-a/2;return Math.min(l-a,Math.max(0,r))}var Ia=a(2385);const Ca=Symbol.for("vuetify:v-slide-group"),Ua=(0,Ue.U)({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Ca},nextIcon:{type:ya.lE,default:"$next"},prevIcon:{type:ya.lE,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["always","desktop","mobile"].includes(e)},...(0,lt.l)(),...(0,fa.Tp)(),...(0,nt.Q)(),...(0,Xe.k4)({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ka=(0,ke.ev)()({name:"VSlideGroup",props:Ua(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{isRtl:s}=(0,Ke.Vw)(),{displayClasses:i,mobile:o}=(0,fa.AW)(e),r=(0,Xe._v)(e,e.symbol),u=(0,n.XI)(!1),d=(0,n.XI)(0),c=(0,n.XI)(0),v=(0,n.XI)(0),p=(0,l.Fl)((()=>"horizontal"===e.direction)),{resizeRef:_,contentRect:g}=(0,ha.y)(),{resizeRef:f,contentRect:y}=(0,ha.y)(),h=(0,l.Fl)((()=>r.selected.value.length?r.items.value.findIndex((e=>e.id===r.selected.value[0])):-1)),S=(0,l.Fl)((()=>r.selected.value.length?r.items.value.findIndex((e=>e.id===r.selected.value[r.selected.value.length-1])):-1));if(Ia.BR){let t=-1;(0,l.YP)((()=>[r.selected.value,g.value,y.value,p.value]),(()=>{cancelAnimationFrame(t),t=requestAnimationFrame((()=>{if(g.value&&y.value){const e=p.value?"width":"height";c.value=g.value[e],v.value=y.value[e],u.value=c.value+1<v.value}if(h.value>=0&&f.value){const t=f.value.children[S.value];0!==h.value&&u.value?e.centerActive?d.value=wa({selectedElement:t,containerSize:c.value,contentSize:v.value,isRtl:s.value,isHorizontal:p.value}):u.value&&(d.value=Sa({selectedElement:t,containerSize:c.value,contentSize:v.value,isRtl:s.value,currentScrollOffset:d.value,isHorizontal:p.value})):d.value=0}}))}))}const w=(0,n.XI)(!1);let I=0,C=0;function U(e){const t=p.value?"clientX":"clientY",a=s.value&&p.value?-1:1;C=a*d.value,I=e.touches[0][t],w.value=!0}function k(e){if(!u.value)return;const t=p.value?"clientX":"clientY",a=s.value&&p.value?-1:1;d.value=a*(C+I-e.touches[0][t])}function W(e){const t=v.value-c.value;d.value<0||!u.value?d.value=0:d.value>=t&&(d.value=t),w.value=!1}function x(){_.value&&(_.value[p.value?"scrollLeft":"scrollTop"]=0)}const T=(0,n.XI)(!1);function N(e){if(T.value=!0,u.value&&f.value)for(const t of e.composedPath())for(const e of f.value.children)if(e===t)return void(d.value=Sa({selectedElement:e,containerSize:c.value,contentSize:v.value,isRtl:s.value,currentScrollOffset:d.value,isHorizontal:p.value}))}function L(e){T.value=!1}function E(e){T.value||e.relatedTarget&&f.value?.contains(e.relatedTarget)||V()}function R(e){f.value&&(p.value?"ArrowRight"===e.key?V(s.value?"prev":"next"):"ArrowLeft"===e.key&&V(s.value?"next":"prev"):"ArrowDown"===e.key?V("next"):"ArrowUp"===e.key&&V("prev"),"Home"===e.key?V("first"):"End"===e.key&&V("last"))}function V(e){if(f.value)if(e)if("next"===e){const e=f.value.querySelector(":focus")?.nextElementSibling;e?e.focus():V("first")}else if("prev"===e){const e=f.value.querySelector(":focus")?.previousElementSibling;e?e.focus():V("last")}else"first"===e?f.value.firstElementChild?.focus():"last"===e&&f.value.lastElementChild?.focus();else{const e=(0,Te.ef)(f.value);e[0]?.focus()}}function A(e){const t=d.value+("prev"===e?-1:1)*c.value;d.value=(0,Te.uZ)(t,0,v.value-c.value)}const q=(0,l.Fl)((()=>{let e=d.value>v.value-c.value?-(v.value-c.value)+ba(v.value-c.value-d.value):-d.value;d.value<=0&&(e=ba(-d.value));const t=s.value&&p.value?-1:1;return{transform:`translate${p.value?"X":"Y"}(${t*e}px)`,transition:w.value?"none":"",willChange:w.value?"transform":""}})),F=(0,l.Fl)((()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected}))),H=(0,l.Fl)((()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!o.value;case!0:return u.value||Math.abs(d.value)>0;case"mobile":return o.value||u.value||Math.abs(d.value)>0;default:return!o.value&&(u.value||Math.abs(d.value)>0)}})),O=(0,l.Fl)((()=>Math.abs(d.value)>0)),D=(0,l.Fl)((()=>v.value>Math.abs(d.value)+c.value));return(0,xe.L)((()=>(0,l.Wm)(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!p.value,"v-slide-group--has-affixes":H.value,"v-slide-group--is-overflowing":u.value},i.value,e.class],style:e.style,tabindex:T.value||r.selected.value.length?-1:0,onFocus:E},{default:()=>[H.value&&(0,l.Wm)("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!O.value}],onClick:()=>O.value&&A("prev")},[a.prev?.(F.value)??(0,l.Wm)(m.Z5,null,{default:()=>[(0,l.Wm)(b.t,{icon:s.value?e.nextIcon:e.prevIcon},null)]})]),(0,l.Wm)("div",{key:"container",ref:_,class:"v-slide-group__container",onScroll:x},[(0,l.Wm)("div",{ref:f,class:"v-slide-group__content",style:q.value,onTouchstartPassive:U,onTouchmovePassive:k,onTouchendPassive:W,onFocusin:N,onFocusout:L,onKeydown:R},[a.default?.(F.value)])]),H.value&&(0,l.Wm)("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!D.value}],onClick:()=>D.value&&A("next")},[a.next?.(F.value)??(0,l.Wm)(m.Z5,null,{default:()=>[(0,l.Wm)(b.t,{icon:s.value?e.prevIcon:e.nextIcon},null)]})])]}))),{selected:r.selected,scrollTo:A,scrollOffset:d,focus:V}}});var Wa=a(9694);function xa(e){return e?e.map((e=>(0,Te.Kn)(e)?e:{text:e,value:e})):[]}const Ta=(0,Ue.U)({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ua({mandatory:"force"}),...(0,Wa.f)(),...(0,nt.Q)()},"VTabs"),Na=(0,ke.ev)()({name:"VTabs",props:Ta(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const s=(0,Ce.z)(e,"modelValue"),i=(0,l.Fl)((()=>xa(e.items))),{densityClasses:o}=(0,Wa.t)(e),{backgroundColorClasses:r,backgroundColorStyles:u}=(0,ca.Y5)((0,n.Vh)(e,"bgColor"));return(0,Lt.AF)({VTab:{color:(0,n.Vh)(e,"color"),direction:(0,n.Vh)(e,"direction"),stacked:(0,n.Vh)(e,"stacked"),fixed:(0,n.Vh)(e,"fixedTabs"),sliderColor:(0,n.Vh)(e,"sliderColor"),hideSlider:(0,n.Vh)(e,"hideSlider")}}),(0,xe.L)((()=>{const t=ka.filterProps(e);return(0,l.Wm)(ka,(0,l.dG)(t,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},o.value,r.value,e.class],style:[{"--v-tabs-height":(0,Te.kb)(e.height)},u.value,e.style],role:"tablist",symbol:ma}),{default:()=>[a.default?a.default():i.value.map((e=>(0,l.Wm)(ga,(0,l.dG)(e,{key:e.text}),null)))]})})),{}}});var La=a(7471),Ea=a(5030);const Ra={key:0,class:"text-error"},Va={key:0,class:"text-success"};var Aa;(function(e){e["CAMPAIGN"]="Кампании",e["CHANNEL"]="Каналы"})(Aa||(Aa={}));var qa=(0,l.aZ)({__name:"index",setup(e){const t=(0,n.iH)(Aa.CAMPAIGN),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),r=(0,l.Fl)((()=>a.params.id)),{data:u,isLoading:c,isError:v,error:p,executeRequest:_}=(0,o.Z)({immediate:!0,request:aa.Y.getExistChannel,initialArgs:[Number(s.value),Number(r.value)]}),g=(0,n.iH)();return(0,l.YP)(u,(e=>{console.log("newVal",e),g.value=e})),(0,l.bv)((async()=>{})),(e,a)=>((0,l.wg)(),(0,l.j4)(Ft._,{tag:"section",class:"yandex-direct-edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(La.i,{density:"compact",color:"primary"},{extension:(0,l.w5)((()=>[g.value?.ready_to_configure?((0,l.wg)(),(0,l.j4)(Na,{key:0,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),"align-tabs":"center",color:"primary-darken-4",grow:""},{default:(0,l.w5)((()=>[(0,l.Wm)(ga,{value:Aa.CAMPAIGN},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(Aa.CAMPAIGN),1)])),_:1},8,["value"]),(0,l.Wm)(ga,{value:Aa.CHANNEL},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(Aa.CHANNEL),1)])),_:1},8,["value"])])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])),default:(0,l.w5)((()=>[(0,l.Wm)(Ea.q,{tag:"h1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Яндекс.Директ")])),_:1})])),_:1}),(0,l.Wm)(Nt.C,{class:"pa-4 text-center mx-auto",elevation:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(m.Fx,null,{default:(0,l.w5)((()=>[g.value?.ready_to_configure?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",Ra,"Интеграция в процессе"))])),_:1}),(0,l.Wm)(m.Fx,null,{default:(0,l.w5)((()=>[g.value?.ready_to_configure?((0,l.wg)(),(0,l.iD)("span",Va," Интеграция настроена ")):(0,l.kq)("",!0)])),_:1})])),_:1}),g.value?.ready_to_configure?((0,l.wg)(),(0,l.j4)(yt,{key:0,modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e),class:"yandex-direct-edit__window"},{default:(0,l.w5)((()=>[(0,l.Wm)(kt,{value:Aa.CAMPAIGN},{default:(0,l.w5)((()=>[(0,l.Wm)(ia)])),_:1},8,["value"]),(0,l.Wm)(kt,{value:Aa.CHANNEL},{default:(0,l.w5)((()=>[(0,l.Wm)(da)])),_:1},8,["value"])])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])),_:1}))}});const Fa=qa;var Ha=Fa,Oa=Ha,Da=(0,l.aZ)({__name:"index",setup(e){Ge(tl);const t=(0,d.yj)(),a=((0,l.Fl)((()=>t.params.statId)),(0,l.Fl)((()=>t.params.id)),(0,n.XI)(al(t))),s=(0,l.Fl)((()=>{const e=a.value.find((e=>e.route?.query?.step===t.query.step));return e?e.id:0}));return(e,t)=>((0,l.wg)(),(0,l.j4)(Ft._,{tag:"section",class:"yandex-direct-edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(La.i,{density:"compact",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ea.q,{tag:"h1"},{default:(0,l.w5)((()=>[(0,l.Uk)("LandingPage")])),_:1})])),_:1}),(0,l.Wm)((0,n.SU)(Bt),{steps:a.value,"selected-id":s.value},null,8,["steps","selected-id"])])),_:1}))}});const Ba=Da;var Za=Ba;const za=e=>((0,l.dD)("data-v-7d580280"),e=e(),(0,l.Cn)(),e),Ma={class:"amo-basic-settings"},Pa=za((()=>(0,l._)("h3",{class:"amo-card__header"},"Инструкция по настройке",-1))),Ya=za((()=>(0,l._)("p",null,"Типовая интеграция, которая принимает данные через WebHook.",-1))),Ga=za((()=>(0,l._)("p",null,"Отправляйте данные в теле запроса в следующем формате:",-1))),ja=za((()=>(0,l._)("div",null,null,-1))),Xa=[Pa,Ya,Ga,ja];var $a=(0,l.aZ)({__name:"step-instruction",props:{isOpen:{type:Boolean}},setup(e){return(e,t)=>((0,l.wg)(),(0,l.iD)("section",Ma,Xa))}});const Ja=(0,C.Z)($a,[["__scopeId","data-v-7d580280"]]);var Ka,Qa=Ja,el=Za;(function(e){e[e["INSTRUCTION"]=0]="INSTRUCTION"})(Ka||(Ka={}));const tl=["guide","custom_settings","counter"],al=e=>[{id:Ka.INSTRUCTION,name:"Инструкция по настройке",route:{...e,query:{step:tl[0]}},component:Qa,isComplite:!1}];var ll=(0,l.aZ)({__name:"index",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){Ge(Dl);const t=(0,d.yj)(),a=((0,l.Fl)((()=>t.params.statId)),(0,l.Fl)((()=>t.params.id)),(0,n.XI)(Bl(t))),s=(0,l.Fl)((()=>{const e=a.value.find((e=>e.route?.query?.step===t.query.step));return e?e.id:0})),i=e;return(e,t)=>((0,l.wg)(),(0,l.j4)(Ft._,{tag:"section",class:"yandex-direct-edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(La.i,{density:"compact",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ea.q,{tag:"h1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Webhook")])),_:1})])),_:1}),(0,l.Wm)((0,n.SU)(Bt),{steps:a.value,"selected-id":s.value,"type-lead-source-itntegration":i.typeLeadSourceItntegration},null,8,["steps","selected-id","type-lead-source-itntegration"])])),_:1}))}});const nl=ll;var sl=nl,il=a(3373);const ol=e=>((0,l.dD)("data-v-2ca2acfc"),e=e(),(0,l.Cn)(),e),rl={class:"amo-basic-settings"},ul=ol((()=>(0,l._)("h3",{class:"amo-card__header"},"Инструкция по настройке",-1))),dl=ol((()=>(0,l._)("p",null,"Типовая интеграция, которая принимает данные через WebHook.",-1))),cl=ol((()=>(0,l._)("p",null,"Отправляйте данные в теле запроса в следующем формате:",-1))),ml=ol((()=>(0,l._)("pre",null,'{\n    "title" : "Название сделки",\n    "name" : "Имя клиента",\n    "email" : "test@test.test",\n    "phone" : "+79876543210",\n    "comment" : "Комментарий проксилида",\n    "roistat_visit" : "123456", //значение куки roistat_visit у пользователя\n    "fields": {\n        "site": "example.com",\n        "source": "vk"\n    }\n}\n            ',-1))),vl=ol((()=>(0,l._)("b",null,"Webhook URL:",-1)));var pl=(0,l.aZ)({__name:"step-instruction",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const{integrationLeadSourceType:t}=(0,Zt.Jk)((0,zt.P)()),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),r=(0,l.Fl)((()=>a.params.id)),u=e,{data:c,executeRequest:m}=(0,o.Z)({immediate:!0,request:il.tf.getSourceWebhook,initialArgs:[Number(r.value),Number(s.value),Number(u.typeLeadSourceItntegration)]});return(e,t)=>((0,l.wg)(),(0,l.iD)("section",rl,[ul,dl,cl,(0,l._)("div",null,[ml,vl,(0,l._)("pre",null,(0,i.zw)((0,n.SU)(c)?.webhook_url),1)])]))}});const _l=(0,C.Z)(pl,[["__scopeId","data-v-2ca2acfc"]]);var gl=_l;const fl=e=>((0,l.dD)("data-v-2d21db08"),e=e(),(0,l.Cn)(),e),yl={class:"amo-basic-settings"},hl=fl((()=>(0,l._)("h3",{class:"amo-card__header"},"Настройка поведения",-1))),bl={class:"amo-basic-settings__body"},Sl={class:"amo-basic-settings__body__switch-container"},wl={for:"amo-send-lead-setting1"},Il={class:"amo-basic-settings__body__switch-container"},Cl={for:"amo-send-lead-setting2"};var Ul=(0,l.aZ)({__name:"step-custom",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const{integrationWebhookSettings:t}=(0,Zt.Jk)((0,zt.P)()),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),i=(0,l.Fl)((()=>a.params.id)),r=(0,n.iH)(),u=(0,n.iH)(),{data:m,isLoading:v,error:p,isError:_,executeRequest:g}=(0,o.Z)({request:il.tf.putSettingSourceWebhook,immediate:!1}),f=e,{data:y,isLoading:h,error:b,isError:S,executeRequest:w}=(0,o.Z)({request:il.tf.getSettingSourceWebhook,immediate:!0,initialArgs:[Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)]});(0,l.bv)((async()=>{setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}));const I=async()=>{g(Number(i.value),Number(s.value),{is_enable_sending_lead:r.value?1:0,is_enable_creating_lead_without_contacts:u.value?1:0},Number(f.typeLeadSourceItntegration)),setTimeout((()=>{w(Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)),setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}),200)};return(e,t)=>((0,l.wg)(),(0,l.iD)("section",yl,[hl,(0,l._)("div",bl,[(0,l._)("div",Sl,[(0,l.Wm)(Le,{id:"amo-send-lead-setting1",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"]),(0,l._)("label",wl,[(0,l.Uk)(" Отправлять заявки в CRM "),(0,l.Wm)(k,{information:"Если отключено, то лиды будут создаваться в нашем списке отправленных заявок, но не будут отправляться в CRM."})])]),(0,l._)("div",Il,[(0,l.Wm)(Le,{id:"amo-send-lead-setting2",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e)},null,8,["modelValue"]),(0,l._)("label",Cl,[(0,l.Uk)(" Создавать заявки без контактных данных "),(0,l.Wm)(k,{information:"Отправить заявку в CRM-систему даже в случае отсутствия контактных данных клиента."})])]),(0,l.Wm)(c.T,{size:"default",variant:"flat",color:"primary",class:"mt-2",loading:(0,n.SU)(v),onClick:I},{default:(0,l.w5)((()=>[(0,l.Uk)(" Сохранить ")])),_:1},8,["loading"])])]))}});const kl=(0,C.Z)(Ul,[["__scopeId","data-v-2d21db08"]]);var Wl=kl,xl=a(5923);const Tl=e=>((0,l.dD)("data-v-1702a3bb"),e=e(),(0,l.Cn)(),e),Nl={class:"amo-basic-settings"},Ll=Tl((()=>(0,l._)("h3",{class:"amo-card__header"},"Код счётчика",-1))),El=Tl((()=>(0,l._)("p",null," Счётчик нужен для корректной работы аналитики, ловца лидов, онлайн-чата. После встраивания кода счётчика на сайт вы можете проверить его работу, введя название сайта в поле «Проверка счётчика». ",-1))),Rl=Tl((()=>(0,l._)("h3",{class:"amo-card__header"},"Инструкция по установке",-1))),Vl=Tl((()=>(0,l._)("p",null,[(0,l.Uk)(" Установить код счётчика необходимо внутри тега "),(0,l._)("body"),(0,l.Uk)(" в HTML-коде страницы. Для корректного подсчёта статистики установите код счётчика на все страницы сайта. Просто скопируйте эту инструкцию и отдайте вашему разработчику. ")],-1)));var Al=(0,l.aZ)({__name:"step-counter",setup(e){const{getWehookIntegration:t}=(0,Zt.Jk)((0,zt.P)()),{statHash:a,statCounter:s}=(0,Zt.Jk)((0,xl.a)()),o=(0,d.yj)(),r=((0,l.Fl)((()=>o.params.statId)),(0,l.Fl)((()=>o.params.id)),(0,n.iH)((0,zt.P)().getWehookIntegration),()=>{s.value&&navigator.clipboard.writeText(s.value)});return(e,t)=>((0,l.wg)(),(0,l.iD)("section",Nl,[Ll,El,Rl,Vl,(0,l._)("div",null,[(0,l._)("pre",null,"                "+(0,i.zw)((0,n.SU)(s))+"\n            ",1)]),(0,l.Wm)(c.T,{size:"default",variant:"flat",color:"primary",class:"mt-2",onClick:r},{default:(0,l.w5)((()=>[(0,l.Uk)(" Скопировать в буфер")])),_:1})]))}});const ql=(0,C.Z)(Al,[["__scopeId","data-v-1702a3bb"]]);var Fl,Hl=ql,Ol=sl;(function(e){e[e["INSTRUCTION"]=0]="INSTRUCTION",e[e["CUSTOM_BEHAVIOR"]=1]="CUSTOM_BEHAVIOR",e[e["COUNTER"]=2]="COUNTER"})(Fl||(Fl={}));const Dl=["guide","custom_settings","counter"],Bl=e=>[{id:Fl.INSTRUCTION,name:"Инструкция по настройке",route:{...e,query:{step:Dl[0]}},component:gl,isComplite:!1},{id:Fl.CUSTOM_BEHAVIOR,name:"Настройка поведения",route:{...e,query:{step:Dl[1]}},component:Wl,isComplite:!1},{id:Fl.COUNTER,name:"Код счетчика",route:{...e,query:{step:Dl[2]}},component:Hl,isComplite:!1}];var Zl=(0,l.aZ)({__name:"index",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){Ge(pn);const t=(0,d.yj)(),a=(0,n.XI)(_n(t)),s=(0,l.Fl)((()=>{const e=a.value.find((e=>e.route?.query?.step===t.query.step));return e?e.id:0})),i=e;return(e,t)=>((0,l.wg)(),(0,l.j4)(Ft._,{tag:"section",class:"yandex-direct-edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(La.i,{density:"compact",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ea.q,{tag:"h1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Flexbe")])),_:1})])),_:1}),(0,l.Wm)((0,n.SU)(Bt),{steps:a.value,"selected-id":s.value,"type-lead-source-itntegration":i.typeLeadSourceItntegration},null,8,["steps","selected-id","type-lead-source-itntegration"])])),_:1}))}});const zl=Zl;var Ml=zl,Pl=a(2913);const Yl=e=>((0,l.dD)("data-v-74db6752"),e=e(),(0,l.Cn)(),e),Gl={class:"amo-basic-settings"},jl=Yl((()=>(0,l._)("h3",{class:"amo-card__header"},"Инструкция по настройке Flexbe",-1))),Xl=Yl((()=>(0,l._)("p",null," Интеграция с флексби позволяет отслеживать заявки поситителей, оставленные на вашем сайте и автоматически создавать полученные лиды в CRM. Для интеграции Необходимо в настройках Flexbe зайти в раздел API и добавить webhook, а также в разделе Счетчики прописать код счетчика в секции другие счетчики. ",-1))),$l=Yl((()=>(0,l._)("b",null,"URL:",-1)));var Jl=(0,l.aZ)({__name:"step-instruction",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const t=(0,d.yj)(),a=(0,l.Fl)((()=>t.params.statId)),s=(0,l.Fl)((()=>t.params.id)),r=e,{data:u,executeRequest:c}=(0,o.Z)({immediate:!0,request:Pl.t.getSourceWebhook,initialArgs:[Number(s.value),Number(a.value),Number(r.typeLeadSourceItntegration)]});return(e,t)=>((0,l.wg)(),(0,l.iD)("section",Gl,[jl,Xl,(0,l._)("div",null,[$l,(0,l._)("pre",null,(0,i.zw)((0,n.SU)(u)?.webhook_url),1)])]))}});const Kl=(0,C.Z)(Jl,[["__scopeId","data-v-74db6752"]]);var Ql=Kl;const en=e=>((0,l.dD)("data-v-6a8b8f6d"),e=e(),(0,l.Cn)(),e),tn={class:"amo-basic-settings"},an=en((()=>(0,l._)("h3",{class:"amo-card__header"},"Настройка поведения",-1))),ln={class:"amo-basic-settings__body"},nn={class:"amo-basic-settings__body__switch-container"},sn={for:"amo-send-lead-setting1"},on={class:"amo-basic-settings__body__switch-container"},rn={for:"amo-send-lead-setting2"};var un=(0,l.aZ)({__name:"step-custom",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const{integrationWebhookSettings:t}=(0,Zt.Jk)((0,zt.P)()),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),i=(0,l.Fl)((()=>a.params.id)),r=(0,n.iH)(),u=(0,n.iH)(),{data:m,isLoading:v,error:p,isError:_,executeRequest:g}=(0,o.Z)({request:il.tf.putSettingSourceWebhook,immediate:!1}),f=e,{data:y,isLoading:h,error:b,isError:S,executeRequest:w}=(0,o.Z)({request:il.tf.getSettingSourceWebhook,immediate:!0,initialArgs:[Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)]});(0,l.bv)((async()=>{setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}));const I=async()=>{g(Number(i.value),Number(s.value),{is_enable_sending_lead:r.value?1:0,is_enable_creating_lead_without_contacts:u.value?1:0},Number(f.typeLeadSourceItntegration)),setTimeout((()=>{w(Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)),setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}),200)};return(e,t)=>((0,l.wg)(),(0,l.iD)("section",tn,[an,(0,l._)("div",ln,[(0,l._)("div",nn,[(0,l.Wm)(Le,{id:"amo-send-lead-setting1",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"]),(0,l._)("label",sn,[(0,l.Uk)(" Отправлять заявки в CRM "),(0,l.Wm)(k,{information:"Если отключено, то лиды будут создаваться в нашем списке отправленных заявок, но не будут отправляться в CRM."})])]),(0,l._)("div",on,[(0,l.Wm)(Le,{id:"amo-send-lead-setting2",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e)},null,8,["modelValue"]),(0,l._)("label",rn,[(0,l.Uk)(" Создавать заявки без контактных данных "),(0,l.Wm)(k,{information:"Отправить заявку в CRM-систему даже в случае отсутствия контактных данных клиента."})])]),(0,l.Wm)(c.T,{size:"default",variant:"flat",color:"primary",class:"mt-2",loading:(0,n.SU)(v),onClick:I},{default:(0,l.w5)((()=>[(0,l.Uk)(" Сохранить ")])),_:1},8,["loading"])])]))}});const dn=(0,C.Z)(un,[["__scopeId","data-v-6a8b8f6d"]]);var cn,mn=dn,vn=Ml;(function(e){e[e["INSTRUCTION"]=0]="INSTRUCTION",e[e["CUSTOM_BEHAVIOR"]=1]="CUSTOM_BEHAVIOR"})(cn||(cn={}));const pn=["guide","custom_settings"],_n=e=>[{id:cn.INSTRUCTION,name:"Инструкция по настройке",route:{...e,query:{step:pn[0]}},component:Ql,isComplite:!1},{id:cn.CUSTOM_BEHAVIOR,name:"Настройка поведения",route:{...e,query:{step:pn[1]}},component:mn,isComplite:!1}];var gn=(0,l.aZ)({__name:"index",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){Ge(Mn);const t=(0,d.yj)(),a=(0,n.XI)(Pn(t)),s=(0,l.Fl)((()=>{const e=a.value.find((e=>e.route?.query?.step===t.query.step));return e?e.id:0})),i=e;return(e,t)=>((0,l.wg)(),(0,l.j4)(Ft._,{tag:"section",class:"yandex-direct-edit"},{default:(0,l.w5)((()=>[(0,l.Wm)(La.i,{density:"compact",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(Ea.q,{tag:"h1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Tilda")])),_:1})])),_:1}),(0,l.Wm)((0,n.SU)(Bt),{steps:a.value,"selected-id":s.value,"type-lead-source-itntegration":i.typeLeadSourceItntegration},null,8,["steps","selected-id","type-lead-source-itntegration"])])),_:1}))}});const fn=gn;var yn=fn;const hn=e=>((0,l.dD)("data-v-4de87084"),e=e(),(0,l.Cn)(),e),bn={class:"amo-basic-settings"},Sn=hn((()=>(0,l._)("h3",{class:"amo-card__header"},"Инструкция по настройке Tilda",-1))),wn=hn((()=>(0,l._)("p",null," Интеграция с Tilda позволяет отслеживать заявки поситителей, оставленные на вашем сайте и автоматически создавать полученные лиды в CRM. Для интеграции Необходимо в настройках Tilda зайти в раздел Мои сайты - необходимый сайт- Настройки - Формы - Сервисы приема данных из форм. ",-1))),In=hn((()=>(0,l._)("p",null," ВЫбрать Webhook? скопировать адрес ниже, отметить галочки посылать cookies и сохранить. ",-1))),Cn=hn((()=>(0,l._)("p",null," В каждой форме должен быть подключен соответствующий сервис во вкладке Контент. ",-1))),Un=hn((()=>(0,l._)("p",null," Чтобы из форм генгерировались лиды необходимо наличие хотя бы одного из полей формы: phone, email, ",-1))),kn=hn((()=>(0,l._)("p",null," Дополнительно при формировании лида могут быть использованы поля формы: name, comment. ",-1))),Wn=hn((()=>(0,l._)("b",null,"URL:",-1)));var xn=(0,l.aZ)({__name:"step-instruction",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const t=(0,d.yj)(),a=(0,l.Fl)((()=>t.params.statId)),s=(0,l.Fl)((()=>t.params.id)),r=e,{data:u,executeRequest:c}=(0,o.Z)({immediate:!0,request:Pl.t.getSourceWebhook,initialArgs:[Number(s.value),Number(a.value),Number(r.typeLeadSourceItntegration)]});return(e,t)=>((0,l.wg)(),(0,l.iD)("section",bn,[Sn,wn,In,Cn,Un,kn,(0,l._)("div",null,[Wn,(0,l._)("pre",null,(0,i.zw)((0,n.SU)(u)?.webhook_url),1)])]))}});const Tn=(0,C.Z)(xn,[["__scopeId","data-v-4de87084"]]);var Nn=Tn;const Ln=e=>((0,l.dD)("data-v-27a95419"),e=e(),(0,l.Cn)(),e),En={class:"amo-basic-settings"},Rn=Ln((()=>(0,l._)("h3",{class:"amo-card__header"},"Настройка поведения",-1))),Vn={class:"amo-basic-settings__body"},An={class:"amo-basic-settings__body__switch-container"},qn={for:"amo-send-lead-setting1"},Fn={class:"amo-basic-settings__body__switch-container"},Hn={for:"amo-send-lead-setting2"};var On=(0,l.aZ)({__name:"step-custom",props:{isOpen:{type:Boolean},typeLeadSourceItntegration:{}},setup(e){const{integrationWebhookSettings:t}=(0,Zt.Jk)((0,zt.P)()),a=(0,d.yj)(),s=(0,l.Fl)((()=>a.params.statId)),i=(0,l.Fl)((()=>a.params.id)),r=(0,n.iH)(),u=(0,n.iH)(),{data:m,isLoading:v,error:p,isError:_,executeRequest:g}=(0,o.Z)({request:il.tf.putSettingSourceWebhook,immediate:!1}),f=e,{data:y,isLoading:h,error:b,isError:S,executeRequest:w}=(0,o.Z)({request:il.tf.getSettingSourceWebhook,immediate:!0,initialArgs:[Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)]});(0,l.bv)((async()=>{setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}));const I=async()=>{g(Number(i.value),Number(s.value),{is_enable_sending_lead:r.value?1:0,is_enable_creating_lead_without_contacts:u.value?1:0},Number(f.typeLeadSourceItntegration)),setTimeout((()=>{w(Number(i.value),Number(s.value),Number(f.typeLeadSourceItntegration)),setTimeout((()=>{1==y.value?.is_enable_sending_lead?r.value=!0:r.value=!1,1==y.value?.is_enable_creating_lead_without_contacts?u.value=!0:u.value=!1}),200)}),200)};return(e,t)=>((0,l.wg)(),(0,l.iD)("section",En,[Rn,(0,l._)("div",Vn,[(0,l._)("div",An,[(0,l.Wm)(Le,{id:"amo-send-lead-setting1",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"]),(0,l._)("label",qn,[(0,l.Uk)(" Отправлять заявки в CRM "),(0,l.Wm)(k,{information:"Если отключено, то лиды будут создаваться в нашем списке отправленных заявок, но не будут отправляться в CRM."})])]),(0,l._)("div",Fn,[(0,l.Wm)(Le,{id:"amo-send-lead-setting2",color:"primary",class:"amo-basic-settings__body__switch-container__switch",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e)},null,8,["modelValue"]),(0,l._)("label",Hn,[(0,l.Uk)(" Создавать заявки без контактных данных "),(0,l.Wm)(k,{information:"Отправить заявку в CRM-систему даже в случае отсутствия контактных данных клиента."})])]),(0,l.Wm)(c.T,{size:"default",variant:"flat",color:"primary",class:"mt-2",loading:(0,n.SU)(v),onClick:I},{default:(0,l.w5)((()=>[(0,l.Uk)(" Сохранить ")])),_:1},8,["loading"])])]))}});const Dn=(0,C.Z)(On,[["__scopeId","data-v-27a95419"]]);var Bn,Zn=Dn,zn=yn;(function(e){e[e["INSTRUCTION"]=0]="INSTRUCTION",e[e["CUSTOM_BEHAVIOR"]=1]="CUSTOM_BEHAVIOR"})(Bn||(Bn={}));const Mn=["guide","custom_settings"],Pn=e=>[{id:Bn.INSTRUCTION,name:"Инструкция по настройке",route:{...e,query:{step:Mn[0]}},component:Nn,isComplite:!1},{id:Bn.CUSTOM_BEHAVIOR,name:"Настройка поведения",route:{...e,query:{step:Mn[1]}},component:Zn,isComplite:!1}];var Yn=a(231),Gn=a(2874),jn=(0,l.aZ)({__name:"index",setup(e){const t=(0,d.yj)(),{data:a,isLoading:s,isError:i,executeRequest:r}=(0,o.Z)({request:Yn.xs.get,initialArgs:[parseInt(Array.isArray(t.params.statId)?"-1":t.params.statId),parseInt(Array.isArray(t.params.id)?"-1":t.params.id)]});(0,l.YP)((()=>t.params),(()=>{r(parseInt(Array.isArray(t.params.statId)?"-1":t.params.statId),parseInt(Array.isArray(t.params.id)?"-1":t.params.id))})),(0,l.m0)((()=>{i.value&&Gn.N.push({name:$.m8.NotFound})}));const u=(0,l.Fl)((()=>{if(a.value)switch(a.value.integration_type){case Yn.R_.CRM:return $t;case Yn.R_.ADVERTISING_CHANNELS:return Oa;case Yn.R_.LEAD_SOURCE:return 2==a.value.type?Ol:3==a.value.type?vn:4==a.value.type?zn:el;default:return}}));return(0,l.bv)((()=>{a.value&&(0,zt.P)().getLeadSourceIntegrationType(Number(a.value.type)),2==a.value?.type&&setTimeout((()=>{(0,zt.P)().getSettingsWebhook(Number(t.params.id),Number(t.params.statId))}),200)})),(e,t)=>((0,l.wg)(),(0,l.j4)(m.Z5,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)((0,l.LL)(u.value),{typeLeadSourceItntegration:(0,n.SU)(a)?.type},null,8,["typeLeadSourceItntegration"]))])),_:1}))}});const Xn=jn;var $n=Xn,Jn=$n}}]);
//# sourceMappingURL=411.365d13b4.js.map